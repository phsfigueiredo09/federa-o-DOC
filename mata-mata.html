<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Mata-Mata - Federa√ß√£o DOC</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">

<style>
body{background:#0f0f0f;color:#fff;font-family:Orbitron;margin:0}
header{background:#000;padding:20px;text-align:center;font-size:26px}
nav{background:#1a1a1a;padding:10px;text-align:center}
nav a{color:white;text-decoration:none;background:#2a2a2a;padding:10px 25px;border-radius:10px}

h2{text-align:center;margin-top:25px}

.chave{
width:90%;
margin:15px auto;
background:#1a1a1a;
padding:10px;
border-radius:10px;
}

.jogo{
display:flex;
justify-content:space-between;
align-items:center;
background:#222;
padding:10px;
margin:10px 0;
border-radius:8px;
}

input{width:50px;text-align:center;padding:5px;border-radius:5px;border:none}

button{padding:6px 12px;border:none;border-radius:6px;background:#007bff;color:white;cursor:pointer}

</style>
</head>

<body>

<header>MATA-MATA - FEDERA√á√ÉO DOC ‚öîÔ∏è</header>

<nav>
<a href="home.html">Home</a>
<a href="grupos.html">Fase de Grupos</a>
<a href="tabela.html">Tabela</a>
</nav>

<h2>üîê ADMIN</h2>
<div style="text-align:center">
<input type="password" id="senha">
<button onclick="login()">Entrar</button>
</div>

<div id="adminArea" style="display:none">

<h2>Gerar Chaveamento</h2>
<div style="text-align:center">
<button onclick="gerar()">Gerar Mata-Mata</button>
</div>

<h2>Confrontos</h2>
<div id="jogos"></div>

</div>

<script>

const senha="docadmin";
let admin=false;
let confrontos=JSON.parse(localStorage.getItem("mata")) || [];

function salvar(){
localStorage.setItem("mata",JSON.stringify(confrontos));
}

function login(){
let s = document.getElementById("senha").value;

if(s === "docadmin"){
    admin = true;
    document.getElementById("adminArea").style.display = "block";
    render();
}else{
    alert("Senha incorreta");
}
}


function gerar(){

let dados=JSON.parse(localStorage.getItem("dados"));
if(!dados){alert("Sem dados");return;}

let todos=[];
for(let g in dados) todos=todos.concat(dados[g]);

todos.sort((a,b)=>b.P-a.P);

let classificados=todos.slice(0,8); // TOP 8

confrontos=[];

for(let i=0;i<classificados.length;i+=2){
confrontos.push({
a:classificados[i].nome,
b:classificados[i+1].nome,
ga:null,
gb:null,
vencedor:null
});
}

salvar();
render();
}

function salvarResultado(i){

let j=confrontos[i];
if(j.ga==null||j.gb==null) return;

if(j.ga>j.gb) j.vencedor=j.a;
else if(j.gb>j.ga) j.vencedor=j.b;
else j.vencedor="Empate";

salvar();
render();
}

function render(){

let h="";

confrontos.forEach((j,i)=>{
h+=`
<div class="jogo">
<span>${j.a}</span>
<input type="number" onchange="confrontos[${i}].ga=this.value">
<span>x</span>
<input type="number" onchange="confrontos[${i}].gb=this.value">
<span>${j.b}</span>
<button onclick="salvarResultado(${i})">Salvar</button>
<span>${j.vencedor||""}</span>
</div>
`;
});

jogos.innerHTML=h;
}

</script>

</body>
</html>
